import{f as Y,a as H,d as Ee,c as Dt}from"../chunks/q6A3s4Ef.js";import{i as rt}from"../chunks/BjYtWKA1.js";import{c as At,o as st,a as Rt}from"../chunks/SRFr5ngH.js";import{D as Ne,o as W,a7 as Pt,ag as Tt,z as St,j as Ft,g as a,P as ze,A as Nt,B as Lt,C as Je,F as Le,p as xe,aa as Bt,G as it,k as ot,I as It,ae as nt,i as zt,W as T,ao as Xe,ap as Be,a3 as Ce,aq as Ht,ar as Vt,as as Ot,ad as Ut,at as $t,m as qt,au as Gt,av as Wt,a8 as Yt,aw as Jt,ax as Xt,ay as Zt,E as Kt,az as Qt,aA as ea,J as ta,b as q,aB as aa,aC as ra,L as sa,n as be,a0 as Ze,a1 as Ke,a2 as ia,s as lt,V as C,aD as ke,w as f,y as D,x as v,t as le,v as ct,aE as He,e as oa,q as na}from"../chunks/DXztHuL0.js";import{a as la,w as ca,s as O,e as L}from"../chunks/CPVcxQeY.js";import{p as Ie,i as se,b as va}from"../chunks/Bs8ixgpK.js";function da(t,e){return e}function fa(t,e,r,i){for(var u=[],h=e.length,n=0;n<h;n++)Ot(e[n].e,u,!0);var g=h>0&&u.length===0&&r!==null;if(g){var w=r.parentNode;Ut(w),w.append(r),i.clear(),re(t,e[0].prev,e[h-1].next)}$t(u,()=>{for(var o=0;o<h;o++){var s=e[o];g||(i.delete(s.k),re(t,s.prev,s.next)),qt(s.e,!g)}})}function ua(t,e,r,i,u,h=null){var n=t,g={flags:e,items:new Map,first:null};{var w=t;n=W?Ne(Pt(w)):w.appendChild(Tt())}W&&St();var o=null,s=!1,_=ze(()=>{var d=r();return zt(d)?d:d==null?[]:nt(d)});Ft(()=>{var d=a(_),x=d.length;if(s&&x===0)return;s=x===0;let c=!1;if(W){var p=Nt(n)===Lt;p!==(x===0)&&(n=Je(),Ne(n),Le(!1),c=!0)}if(W){for(var k=null,b,E=0;E<x;E++){if(xe.nodeType===8&&xe.data===Bt){n=xe,c=!0,Le(!1);break}var S=d[E],B=i(S,E);b=vt(xe,g,k,null,S,B,E,u,e,r),g.items.set(B,b),k=b}x>0&&Ne(Je())}W||pa(d,g,n,u,e,i,r),h!==null&&(x===0?o?it(o):o=ot(()=>h(n)):o!==null&&It(o,()=>{o=null})),c&&Le(!0),a(_)}),W&&(n=xe)}function pa(t,e,r,i,u,h,n){var g=t.length,w=e.items,o=e.first,s=o,_,d=null,x=[],c=[],p,k,b,E;for(E=0;E<g;E+=1){if(p=t[E],k=h(p,E),b=w.get(k),b===void 0){var S=s?s.e.nodes_start:r;d=vt(S,e,d,d===null?e.first:d.next,p,k,E,i,u,n),w.set(k,d),x=[],c=[],s=d.next;continue}if(ha(b,p,E),(b.e.f&Be)!==0&&it(b.e),b!==s){if(_!==void 0&&_.has(b)){if(x.length<c.length){var B=c[0],F;d=B.prev;var U=x[0],G=x[x.length-1];for(F=0;F<x.length;F+=1)Qe(x[F],B,r);for(F=0;F<c.length;F+=1)_.delete(c[F]);re(e,U.prev,G.next),re(e,d,U),re(e,G,B),s=B,d=G,E-=1,x=[],c=[]}else _.delete(b),Qe(b,s,r),re(e,b.prev,b.next),re(e,b,d===null?e.first:d.next),re(e,d,b),d=b;continue}for(x=[],c=[];s!==null&&s.k!==k;)(s.e.f&Be)===0&&(_??(_=new Set)).add(s),c.push(s),s=s.next;if(s===null)continue;b=s}x.push(b),d=b,s=b.next}if(s!==null||_!==void 0){for(var y=_===void 0?[]:nt(_);s!==null;)(s.e.f&Be)===0&&y.push(s),s=s.next;var A=y.length;if(A>0){var V=g===0?r:null;fa(e,y,V,w)}}Ce.first=e.first&&e.first.e,Ce.last=d&&d.e}function ha(t,e,r,i){Vt(t.v,e),t.i=r}function vt(t,e,r,i,u,h,n,g,w,o){var s=(w&Gt)!==0,_=(w&Wt)===0,d=s?_?T(u,!1,!1):Xe(u):u,x=(w&Ht)===0?n:Xe(n),c={i:x,v:d,k:h,a:null,e:null,prev:r,next:i};try{return c.e=ot(()=>g(t,d,x,o),W),c.e.prev=r&&r.e,c.e.next=i&&i.e,r===null?e.first=c:(r.next=c,r.e.next=c.e),i!==null&&(i.prev=c,i.e.prev=c.e),c}finally{}}function Qe(t,e,r){for(var i=t.next?t.next.e.nodes_start:r,u=e?e.e.nodes_start:r,h=t.e.nodes_start;h!==i;){var n=Yt(h);u.before(h),h=n}}function re(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function ga(t,e,r){var i=t==null?"":""+t;return e&&(i=i?i+" "+e:e),i===""?null:i}function dt(t,e,r,i,u,h){var n=t.__className;if(W||n!==r||n===void 0){var g=ga(r,i);(!W||g!==t.getAttribute("class"))&&(g==null?t.removeAttribute("class"):t.className=g),t.__className=r}return h}const xa=Symbol("is custom element"),ba=Symbol("is html");function ma(t,e,r,i){var u=_a(t);W&&(u[e]=t.getAttribute(e)),u[e]!==(u[e]=r)&&(r==null?t.removeAttribute(e):typeof r!="string"&&ya(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function _a(t){return t.__attributes??(t.__attributes={[xa]:t.nodeName.includes("-"),[ba]:t.namespaceURI===Jt})}var et=new Map;function ya(t){var e=et.get(t.nodeName);if(e)return e;et.set(t.nodeName,e=[]);for(var r,i=t,u=Element.prototype;u!==i;){r=Zt(i);for(var h in r)r[h].set&&e.push(h);i=Xt(i)}return e}const wa=()=>performance.now(),te={tick:t=>requestAnimationFrame(t),now:()=>wa(),tasks:new Set};function ft(){const t=te.now();te.tasks.forEach(e=>{e.c(t)||(te.tasks.delete(e),e.f())}),te.tasks.size!==0&&te.tick(ft)}function ka(t){let e;return te.tasks.size===0&&te.tick(ft),{promise:new Promise(r=>{te.tasks.add(e={c:t,f:r})}),abort(){te.tasks.delete(e)}}}function je(t,e){ca(()=>{t.dispatchEvent(new CustomEvent(e))})}function ja(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function tt(t){const e={},r=t.split(";");for(const i of r){const[u,h]=i.split(":");if(!u||h===void 0)break;const n=ja(u.trim());e[n]=h.trim()}return e}const Ca=t=>t;function Ea(t,e,r,i){var u=(t&aa)!==0,h="both",n,g=e.inert,w=e.style.overflow,o,s;function _(){var k=ia,b=Ce;Ze(null),Ke(null);try{return n??(n=r()(e,(i==null?void 0:i())??{},{direction:h}))}finally{Ze(k),Ke(b)}}var d={is_global:u,in(){e.inert=g,je(e,"introstart"),o=Ve(e,_(),s,1,()=>{je(e,"introend"),o==null||o.abort(),o=n=void 0,e.style.overflow=w})},out(k){e.inert=!0,je(e,"outrostart"),s=Ve(e,_(),o,0,()=>{je(e,"outroend"),k==null||k()})},stop:()=>{o==null||o.abort(),s==null||s.abort()}},x=Ce;if((x.transitions??(x.transitions=[])).push(d),la){var c=u;if(!c){for(var p=x.parent;p&&(p.f&Kt)!==0;)for(;(p=p.parent)&&(p.f&Qt)===0;);c=!p||(p.f&ea)!==0}c&&ta(()=>{q(()=>d.in())})}}function Ve(t,e,r,i,u){var h=i===1;if(ra(e)){var n,g=!1;return sa(()=>{if(!g){var k=e({direction:h?"in":"out"});n=Ve(t,k,r,i,u)}}),{abort:()=>{g=!0,n==null||n.abort()},deactivate:()=>n.deactivate(),reset:()=>n.reset(),t:()=>n.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return u(),{abort:be,deactivate:be,reset:be,t:()=>i};const{delay:w=0,css:o,tick:s,easing:_=Ca}=e;var d=[];if(h&&r===void 0&&(s&&s(0,1),o)){var x=tt(o(0,1));d.push(x,x)}var c=()=>1-i,p=t.animate(d,{duration:w,fill:"forwards"});return p.onfinish=()=>{p.cancel();var k=(r==null?void 0:r.t())??1-i;r==null||r.abort();var b=i-k,E=e.duration*Math.abs(b),S=[];if(E>0){var B=!1;if(o)for(var F=Math.ceil(E/16.666666666666668),U=0;U<=F;U+=1){var G=k+b*_(U/F),y=tt(o(G,1-G));S.push(y),B||(B=y.overflow==="hidden")}B&&(t.style.overflow="hidden"),c=()=>{var A=p.currentTime;return k+b*_(A/E)},s&&ka(()=>{if(p.playState!=="running")return!1;var A=c();return s(A,1-A),!0})}p=t.animate(S,{duration:E,fill:"forwards"}),p.onfinish=()=>{c=()=>i,s==null||s(i,1-i),u()}},{abort:()=>{p&&(p.cancel(),p.effect=null,p.onfinish=be)},deactivate:()=>{u=be},reset:()=>{i===0&&(s==null||s(1,0))},t:()=>c()}}function Ma(t){return function(...e){var r=e[0];return r.stopPropagation(),t==null?void 0:t.apply(this,e)}}function Da(t){const e=t-1;return e*e*e+1}function at(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}function Aa(t,{delay:e=0,duration:r=400,easing:i=Da,x:u=0,y:h=0,opacity:n=0}={}){const g=getComputedStyle(t),w=+g.opacity,o=g.transform==="none"?"":g.transform,s=w*(1-n),[_,d]=at(u),[x,c]=at(h);return{delay:e,duration:r,easing:i,css:(p,k)=>`
			transform: ${o} translate(${(1-p)*_}${d}, ${(1-p)*x}${c});
			opacity: ${w-s*k}`}}var Ra=Y('<div class="absolute inset-0 flex items-center justify-center bg-[var(--bg-primary)] svelte-p7jfu8"><div class="text-center svelte-p7jfu8"><svg class="animate-spin h-10 w-10 mx-auto mb-4 text-[var(--accent)] svelte-p7jfu8" fill="none" viewBox="0 0 24 24"><circle class="opacity-25 svelte-p7jfu8" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75 svelte-p7jfu8" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <p class="text-[var(--text-secondary)] svelte-p7jfu8">Loading PDF...</p></div></div>'),Pa=Y('<div class="flex items-center justify-center min-h-full p-8 svelte-p7jfu8"><div class="shadow-2xl bg-white svelte-p7jfu8"><canvas class="block cursor-pointer svelte-p7jfu8" style="max-width: 100%; height: auto;"></canvas></div></div>'),Ta=Ee('<svg class="w-5 h-5 text-[var(--error)] svelte-p7jfu8" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14H9V8h2v8zm4 0h-2V8h2v8z" class="svelte-p7jfu8"></path></svg>'),Sa=Ee('<svg class="w-5 h-5 text-[var(--text-secondary)] svelte-p7jfu8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" class="svelte-p7jfu8"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" class="svelte-p7jfu8"></path></svg>'),Fa=Y('<div><div class="flex items-start justify-between svelte-p7jfu8"><div class="flex-1 min-w-0 svelte-p7jfu8"><div class="flex items-center space-x-2 mb-2 svelte-p7jfu8"><span class="text-xs px-2 py-1 rounded bg-[var(--bg-tertiary)] text-[var(--text-primary)] svelte-p7jfu8"> </span> <span class="text-xs px-2 py-1 rounded bg-[var(--warning)] bg-opacity-20 text-[var(--warning)] svelte-p7jfu8"> </span></div> <div class="bg-[var(--bg-tertiary)] p-2 rounded mb-2 svelte-p7jfu8"><p class="text-sm font-mono text-[var(--text-primary)] break-all svelte-p7jfu8"> </p></div> <div class="space-y-1 svelte-p7jfu8"><p class="text-xs text-[var(--accent)] font-medium svelte-p7jfu8"> </p> <p class="text-xs text-[var(--text-secondary)] leading-relaxed svelte-p7jfu8"> </p></div></div> <button class="ml-3 p-2 rounded-lg hover:bg-[var(--bg-tertiary)] transition-colors flex-shrink-0 svelte-p7jfu8"><!></button></div></div>'),Na=Y('<div class="w-96 bg-[var(--bg-secondary)] border-l border-[var(--border)] flex flex-col svelte-p7jfu8"><div class="p-4 border-b border-[var(--border)] svelte-p7jfu8"><h3 class="text-lg font-semibold text-[var(--text-primary)] svelte-p7jfu8"> </h3> <p class="text-sm text-[var(--text-secondary)] mt-1 svelte-p7jfu8">Click to navigate, toggle to show/hide</p></div> <div class="flex-1 overflow-y-auto p-4 svelte-p7jfu8"><div class="space-y-3 svelte-p7jfu8"></div></div></div>'),La=Y('<div class="fixed inset-0 bg-[var(--bg-primary)] z-50 flex svelte-p7jfu8"><div class="flex-1 flex flex-col svelte-p7jfu8"><div class="bg-[var(--bg-secondary)] border-b border-[var(--border)] px-4 py-3 svelte-p7jfu8"><div class="flex items-center justify-between svelte-p7jfu8"><div class="flex items-center space-x-4 svelte-p7jfu8"><button class="p-2 rounded-lg hover:bg-[var(--bg-tertiary)] transition-colors text-[var(--text-primary)] svelte-p7jfu8" title="Back to home"><svg class="w-5 h-5 svelte-p7jfu8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" class="svelte-p7jfu8"></path></svg></button> <h2 class="font-medium text-[var(--text-primary)] svelte-p7jfu8"> </h2></div> <div class="flex items-center space-x-6 svelte-p7jfu8"><div class="flex items-center space-x-2 svelte-p7jfu8"><button class="p-1.5 rounded hover:bg-[var(--bg-tertiary)] disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-[var(--text-primary)] svelte-p7jfu8" title="Previous page"><svg class="w-4 h-4 svelte-p7jfu8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" class="svelte-p7jfu8"></path></svg></button> <span class="text-sm text-[var(--text-primary)] min-w-[100px] text-center svelte-p7jfu8"> </span> <button class="p-1.5 rounded hover:bg-[var(--bg-tertiary)] disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-[var(--text-primary)] svelte-p7jfu8" title="Next page"><svg class="w-4 h-4 svelte-p7jfu8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="svelte-p7jfu8"></path></svg></button></div> <div class="flex items-center space-x-2 border-l border-[var(--border)] pl-6 svelte-p7jfu8"><button class="p-1.5 rounded hover:bg-[var(--bg-tertiary)] disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-[var(--text-primary)] svelte-p7jfu8" title="Zoom out"><svg class="w-4 h-4 svelte-p7jfu8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4" class="svelte-p7jfu8"></path></svg></button> <button class="text-sm text-[var(--text-primary)] min-w-[50px] hover:text-[var(--accent)] transition-colors svelte-p7jfu8" title="Reset zoom"> </button> <button class="p-1.5 rounded hover:bg-[var(--bg-tertiary)] disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-[var(--text-primary)] svelte-p7jfu8" title="Zoom in"><svg class="w-4 h-4 svelte-p7jfu8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" class="svelte-p7jfu8"></path></svg></button></div> <div class="flex items-center space-x-3 border-l border-[var(--border)] pl-6 svelte-p7jfu8"><button class="px-4 py-2 text-sm bg-[var(--bg-tertiary)] text-[var(--text-primary)] rounded-lg hover:bg-[var(--bg-tertiary)] hover:text-[var(--accent)] transition-colors svelte-p7jfu8"> </button> <button class="px-4 py-2 text-sm bg-[var(--accent)] text-white rounded-lg hover:bg-opacity-90 transition-all disabled:opacity-50 svelte-p7jfu8">Export Redacted PDF</button></div></div></div></div> <div class="flex-1 overflow-auto bg-[var(--bg-tertiary)] relative svelte-p7jfu8"><!></div></div> <!></div>');function Ba(t,e){lt(e,!1);let r=Ie(e,"pdfData",8),i=Ie(e,"redactionMetadata",8),u=Ie(e,"fileName",8);const h=At();let n=null,g=T(1),w=T(0),o=T(1),s=T(),_,d=T(null),x=T(!0),c=T({}),p=null,k=T(!0),b=null;st(async()=>{if(window.pdfjsLib)await E();else{const l=document.createElement("script");l.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js",document.head.appendChild(l),l.onload=async()=>{window.pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",await E()},l.onerror=()=>{console.error("Failed to load PDF.js"),C(k,!1)}}});async function E(){try{const l=atob(r()),m=new Uint8Array(l.length);for(let j=0;j<l.length;j++)m[j]=l.charCodeAt(j);n=await window.pdfjsLib.getDocument({data:m}).promise,C(w,n.numPages),i().forEach(j=>{ke(c,a(c)[j.id]=j.applied!==!1)}),_=a(s).getContext("2d"),await S(),C(k,!1)}catch(l){console.error("Error loading PDF:",l),C(k,!1)}}Rt(()=>{b&&b.cancel(),n&&n.destroy()});async function S(){if(!(!n||!_)){b&&b.cancel();try{const l=await n.getPage(a(g));p=l.getViewport({scale:a(o)}),ke(s,a(s).width=p.width),ke(s,a(s).height=p.height),_.clearRect(0,0,a(s).width,a(s).height);const m={canvasContext:_,viewport:p};b=l.render(m),await b.promise,B()}catch(l){l.name!=="RenderingCancelledException"&&console.error("Error rendering page:",l)}}}function B(){if(!_||!p)return;i().filter(m=>m.page===a(g)-1).forEach(m=>{if(a(c)[m.id]){_.fillStyle="#000000";const[j,I,N,z]=m.bbox;p.transform;const K=j*a(o),Q=p.height-z*a(o),R=(N-j)*a(o),ee=(z-I)*a(o);_.fillRect(K,Q,R,ee)}})}function F(l){const m=a(g)+l;m>=1&&m<=a(w)&&(C(g,m),S())}function U(l){const m=Math.round((a(o)+l)*10)/10;m>=.5&&m<=2&&(C(o,m),S())}function G(){C(o,1),S()}function y(l){ke(c,a(c)[l]=!a(c)[l]),S()}function A(l){C(d,l),C(g,l.page+1),S()}async function V(){const l=event.target,m=l.textContent;l.textContent="Exporting...",l.disabled=!0;try{const j=i().map(z=>({...z,applied:a(c)[z.id]})),I=await fetch("http://localhost:5000/apply_redactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pdf_base64:r(),redactions:j})});if(!I.ok)throw new Error("Failed to export PDF");const N=await I.json();if(N.success){const z=J(N.pdf_base64,"application/pdf"),K=URL.createObjectURL(z),Q=document.createElement("a");Q.href=K,Q.download=`redacted_${u()}`,Q.click(),URL.revokeObjectURL(K)}else throw new Error(N.error||"Export failed")}catch(j){console.error("Export error:",j),alert("Failed to export PDF: "+j.message)}finally{l.textContent=m,l.disabled=!1}}function J(l,m){const j=atob(l),I=new Uint8Array(j.length);for(let N=0;N<j.length;N++)I[N]=j.charCodeAt(N);return new Blob([I],{type:m})}function ce(l){if(!p)return;const m=a(s).getBoundingClientRect(),j=(l.clientX-m.left)*(p.width/m.width),I=(l.clientY-m.top)*(p.height/m.height),N=i().filter(z=>z.page===a(g)-1);for(const z of N){const[K,Q,R,ee]=z.bbox,ge=p.height-I;if(j>=K*a(o)&&j<=R*a(o)&&ge>=Q*a(o)&&ge<=ee*a(o)){A(z);break}}}rt();var ve=La(),de=f(ve),fe=f(de),ue=f(fe),$=f(ue),ie=f($),me=D(ie,2),Me=f(me,!0);v(me),v($);var _e=D($,2),oe=f(_e),pe=f(oe),he=D(pe,2),De=f(he);v(he);var M=D(he,2);v(oe);var P=D(oe,2),X=f(P),Z=D(X,2),Ae=f(Z);v(Z);var Oe=D(Z,2);v(P);var Ue=D(P,2),ye=f(Ue),ut=f(ye);v(ye);var pt=D(ye,2);v(Ue),v(_e),v(ue),v(fe);var $e=D(fe,2),ht=f($e);{var gt=l=>{var m=Ra();H(l,m)},xt=l=>{var m=Pa(),j=f(m),I=f(j);va(I,N=>C(s,N),()=>a(s)),v(j),v(m),L("click",I,ce),H(l,m)};se(ht,l=>{a(k)?l(gt):l(xt,!1)})}v($e),v(de);var bt=D(de,2);{var mt=l=>{var m=Na(),j=f(m),I=f(j),N=f(I);v(I),He(2),v(j);var z=D(j,2),K=f(z);ua(K,5,i,da,(Q,R)=>{var ee=Fa(),ge=f(ee),Re=f(ge),Pe=f(Re),Te=f(Pe),_t=f(Te);v(Te);var qe=D(Te,2),yt=f(qe,!0);v(qe),v(Pe);var Se=D(Pe,2),Ge=f(Se),wt=f(Ge);v(Ge),v(Se);var We=D(Se,2),Fe=f(We),kt=f(Fe,!0);v(Fe);var Ye=D(Fe,2),jt=f(Ye,!0);v(Ye),v(We),v(Re);var we=D(Re,2),Ct=f(we);{var Et=ae=>{var ne=Ta();H(ae,ne)},Mt=ae=>{var ne=Sa();H(ae,ne)};se(Ct,ae=>{a(c),a(R),q(()=>a(c)[a(R).id])?ae(Et):ae(Mt,!1)})}v(we),v(ge),v(ee),le(ae=>{dt(ee,1,`p-3 rounded-lg border transition-all cursor-pointer
							${a(d),a(R),q(()=>{var ne;return((ne=a(d))==null?void 0:ne.id)===a(R).id?"bg-[var(--accent)] bg-opacity-10 border-[var(--accent)]":"bg-[var(--bg-primary)] border-[var(--border)] hover:border-[var(--text-secondary)]"})??""}`,"svelte-p7jfu8"),O(_t,`Page ${a(R),q(()=>a(R).page+1)??""}`),O(yt,ae),O(wt,`"${a(R),q(()=>a(R).text)??""}"`),O(kt,(a(R),q(()=>a(R).legal_code))),O(jt,(a(R),q(()=>a(R).reason))),ma(we,"title",(a(c),a(R),q(()=>a(c)[a(R).id]?"Click to show text":"Click to hide text")))},[()=>(a(R),q(()=>a(R).type.replace(/_/g," ")))],ze),L("click",we,Ma(()=>y(a(R).id))),L("click",ee,()=>A(a(R))),H(Q,ee)}),v(K),v(z),v(m),le(()=>O(N,`Redactions (${oa(i()),q(()=>i().length)??""})`)),Ea(3,m,()=>Aa,()=>({x:300,duration:300})),H(l,m)};se(bt,l=>{a(x)&&l(mt)})}v(ve),le(l=>{O(Me,u()),pe.disabled=a(g)<=1,O(De,`Page ${a(g)??""} of ${a(w)??""}`),M.disabled=a(g)>=a(w),X.disabled=a(o)<=.5,O(Ae,`${l??""}%`),Oe.disabled=a(o)>=2,O(ut,`${a(x)?"Hide":"Show"} Redactions`)},[()=>(a(o),q(()=>Math.round(a(o)*100)))],ze),L("click",ie,()=>h("close")),L("click",pe,()=>F(-1)),L("click",M,()=>F(1)),L("click",X,()=>U(-.1)),L("click",Z,G),L("click",Oe,()=>U(.1)),L("click",ye,()=>C(x,!a(x))),L("click",pt,V),H(t,ve),ct()}var Ia=Ee('<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>'),za=Ee('<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>'),Ha=Y('<div class="flex items-center justify-center space-x-2"><svg class="animate-spin h-5 w-5 text-[var(--accent)]" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span>Processing document...</span></div>'),Va=Y('<p class="text-lg mb-2">Drop your PDF here or click to browse</p> <p class="text-sm text-[var(--text-secondary)]">Maximum file size: 50MB</p>',1),Oa=Y('<div class="mt-6 p-4 bg-[var(--bg-secondary)] rounded-lg"><p class="text-sm">Selected file: <span class="font-medium"> </span></p></div>'),Ua=Y('<div class="mt-6 p-4 bg-red-50 dark:bg-red-900/20 border border-[var(--error)] rounded-lg"><p class="text-[var(--error)]"> </p></div>'),$a=Y(`<div class="min-h-screen bg-[var(--bg-primary)] text-[var(--text-primary)] transition-colors duration-300"><header class="border-b border-[var(--border)]"><div class="max-w-6xl mx-auto px-6 py-4 flex justify-between items-center"><div class="flex items-center space-x-3"><svg class="w-8 h-8 text-[var(--accent)]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <h1 class="text-2xl font-bold">California Legal Document Redactor</h1></div> <button class="p-2 rounded-lg bg-[var(--bg-secondary)] hover:bg-[var(--bg-tertiary)] transition-colors"><!></button></div></header> <main class="max-w-4xl mx-auto px-6 py-12"><div class="text-center mb-8"><h2 class="text-3xl font-semibold mb-4">Legal Document Redaction System</h2> <p class="text-[var(--text-secondary)] text-lg">Automatically redact sensitive information according to California law with full legal
					citations</p></div> <div><input type="file" accept=".pdf" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer"/> <svg class="w-16 h-16 mx-auto mb-4 text-[var(--text-secondary)]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> <!></div> <!> <!> <div class="mt-12 grid md:grid-cols-2 gap-6"><div class="bg-[var(--bg-secondary)] rounded-lg p-6"><h3 class="font-semibold text-lg mb-3 text-[var(--accent)]">Automated Redactions</h3> <ul class="space-y-2 text-sm text-[var(--text-secondary)]"><li>• SSN (Civil Code § 1798.3)</li> <li>• Driver's License (Gov Code § 6254)</li> <li>• Minor Information (W&I Code § 827)</li> <li>• Victim Names (Penal Code § 293)</li> <li>• Medical Records (H&S Code § 123100)</li> <li>• Financial Information (Civil Code § 1798.3)</li></ul></div> <div class="bg-[var(--bg-secondary)] rounded-lg p-6"><h3 class="font-semibold text-lg mb-3 text-[var(--accent)]">Interactive Features</h3> <ul class="space-y-2 text-sm text-[var(--text-secondary)]"><li>• View legal citations for each redaction</li> <li>• Toggle redactions on/off</li> <li>• Add custom redactions</li> <li>• Export final redacted version</li> <li>• Full compliance with CA Rules of Court</li> <li>• Detailed redaction report</li></ul></div></div></main></div>`);function Za(t,e){lt(e,!1);let r=T(!0),i=T(!1),u=T(!1),h=T(""),n=T(""),g=!1,w=T(!1),o=T(null),s=T([]);const _="http://localhost:5000";st(()=>{const y=localStorage.getItem("theme");y&&C(r,y==="dark"),d()});function d(){a(r)?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",a(r)?"dark":"light")}function x(){C(r,!a(r)),d()}function c(y){y.preventDefault(),C(u,!0)}function p(y){y.preventDefault(),C(u,!1)}async function k(y){y.preventDefault(),C(u,!1);const A=y.dataTransfer.files;A.length>0&&await E(A[0])}async function b(y){const A=y.target.files;A.length>0&&await E(A[0])}async function E(y){if(y.type!=="application/pdf"){C(n,"Please upload a PDF file");return}C(h,y.name),C(n,""),g=!1,C(i,!0);const A=new FormData;A.append("file",y);try{const V=await fetch(`${_}/redact`,{method:"POST",body:A});if(!V.ok)throw new Error("Failed to redact document");const J=await V.json();if(J.success)C(o,J.pdf_base64),C(s,J.redactions),C(w,!0),g=!0;else throw new Error(J.error||"Unknown error")}catch(V){C(n,V.message||"An error occurred while processing the file")}finally{C(i,!1)}}function S(){C(w,!1),C(o,null),C(s,[]),C(h,"")}rt();var B=Dt(),F=na(B);{var U=y=>{Ba(y,{get pdfData(){return a(o)},get redactionMetadata(){return a(s)},get fileName(){return a(h)},$$events:{close:S}})},G=y=>{var A=$a(),V=f(A),J=f(V),ce=D(f(J),2),ve=f(ce);{var de=M=>{var P=Ia();H(M,P)},fe=M=>{var P=za();H(M,P)};se(ve,M=>{a(r)?M(de):M(fe,!1)})}v(ce),v(J),v(V);var ue=D(V,2),$=D(f(ue),2),ie=f($),me=D(ie,4);{var Me=M=>{var P=Ha();H(M,P)},_e=M=>{var P=Va();He(2),H(M,P)};se(me,M=>{a(i)?M(Me):M(_e,!1)})}v($);var oe=D($,2);{var pe=M=>{var P=Oa(),X=f(P),Z=D(f(X)),Ae=f(Z,!0);v(Z),v(X),v(P),le(()=>O(Ae,a(h))),H(M,P)};se(oe,M=>{a(h)&&!a(n)&&!a(w)&&M(pe)})}var he=D(oe,2);{var De=M=>{var P=Ua(),X=f(P),Z=f(X,!0);v(X),v(P),le(()=>O(Z,a(n))),H(M,P)};se(he,M=>{a(n)&&M(De)})}He(2),v(ue),v(A),le(()=>{dt($,1,`relative border-2 border-dashed rounded-xl p-12 text-center transition-all duration-300 ${a(u)?"border-[var(--accent)] bg-[var(--bg-secondary)]":"border-[var(--border)]"}`),ie.disabled=a(i)}),L("click",ce,x),L("change",ie,b),L("dragover",$,c),L("dragleave",$,p),L("drop",$,k),H(y,A)};se(F,y=>{a(w)?y(U):y(G,!1)})}H(t,B),ct()}export{Za as component};
